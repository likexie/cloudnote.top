# 信号与槽

1. 信号就是触发信号，

   槽就是函数

   信号与连接后，有信号就会执行槽

2. 基本使用介绍

   - 信号

     1. 控件内置的一些，QPushButton().pressed，QPushButton().clicked等等
     2. 可以自定义pyqtSignal()

   - 槽

     1. 不同控件内置槽方法
     2. 自定义的函数/方法

   - 连接方法

     ```python
     # 槽与信号连接
     object.信号.connect(槽函数)
     # 取消连接
     object.信号.disconnect(槽函数)
     # 临时取消阻断连接
     obj.blockSignals(True)
     # 恢复连接
     obj.blockSignals(False)
     
     # 查看当前的blockSignals的值
     obj1.blockSignals(True)
     print(obj1.signalsBlocked()) # 输出True
     ```

   - 特性

     1. 一个信号可以连接多个槽
     2. 一个信号可以连接另一个信号
     3. 信号的参数可以是任何Python类型
     4. 一个槽可以监听多个信号·

   - 特殊函数

     ```python
     1.obj.receivers()
     函数：obj.receivers(obj.objectNameChange)
     查看信号 obj.objectNameChange  连接了几个槽
     ```

     

```python
from PyQt5.Qt import *


class Window(QWidget):
    '''
    初始化窗口
    '''

    def __init__(self, title="python"):
        super().__init__()
        self.setWindowTitle(title)
        self.resize(500, 500)
        self.count = 1

    def Qobject022(self):
        btn1 = QPushButton(self)
        btn1.move(300,450)
        btn1.setText('提交')
        btn1.clicked.connect(self.btn_click)
        
    def btn_click(self,obj):
        print(obj)
        obj.setText("您点击了"+self.count+"次")
        self.setWindowTitle("您点击了"+str(self.count)+"次")
        self.count += 1
    
    def set_name(self):
        # 使用objectNameChanged
        def obj_name_cao(name):
            print("新的名", name)
        def obj_name_cao2(name):
            print("新的名", name)
        obj1 = QObject(self)
        # 槽连接函数
        obj1.objectNameChanged.connect(obj_name_cao)
        obj1.objectNameChanged.connect(obj_name_cao2)
        obj1.setObjectName("xxx")
        obj1.blockSignals(True)
        print(obj1.signalsBlocked())
        obj1.setObjectName("xxx00")
        obj1.blockSignals(False)
        obj1.setObjectName("00xxx")
        print(obj1.receivers(obj1.objectNameChanged))

    def setup_ui(self):
        self.set_name()

if __name__ == "__main__":
    import sys
    app = QApplication(sys.argv)
    window = Window(title='初始化')
    window.setup_ui()
    window.setStyleSheet('background-color:#ff8866')
    
    window.show()
    

    sys.exit(app.exec())
    
    
# 输出
新的名 xxx
新的名 xxx
True
新的名 00xxx
新的名 00xxx
2
```

