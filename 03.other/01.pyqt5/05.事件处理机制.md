# 事件处理机制

## 事件执行的过程

```python
import sys
from PyQt5.Qt import *

class App(QApplication):
    # 2. 事件由操作系统分发给QApplication的notify()
    def notify(self,receiver,evt):
        # 判断父类是QPushButton的，然后再判断类型是MouseButtonPress
        if receiver.inherits("QPushButton") and evt.type()==QEvent.MouseButtonPress:
            print(evt)
        return super().notify(receiver,evt)


class Btn(QPushButton):
    # 3. QApplication的notify()分发给下一级,就是Event()
    def event(self,evt):
        if QEvent.MouseButtonPress == evt.type():
            print(evt,123)
        return super().event(evt)

    def mousePressEvent(self, *args, **kwargs):
        # 鼠标按下的事件,这个事件进行发射信号，从而调用槽函数
        print(args,kwargs)
        print("调用mouseButtonPress")
        super().mousePressEvent(*args, **kwargs)


app = App(sys.argv)
window = QWidget()
btn = Btn(window)
btn.setText("提交")
btn.move(50,50)
window.show()

def btn_click():
    print("提交")

btn.clicked.connect(btn_click)
# 1. 发生点击事件
sys.exit(app.exec_())
```

## 流程解释

1. 用户的操作会产生各种事件消息
2. 第一个接收到的消息是操作系统，操作系统将消息分发给对应的应用程序“消息队列”中
3. 系统产生的消息队列和程序产生的内部消息队列（事件不断的轮询看有无事件发生）
4. 当有事件发生的时候，将事件接收者（reciver）和事件对象(ent)传递给QApplication对象的notify(receiver,event)方法
5. QApplication的notify()分发给下一级,就是Event()
6. 鼠标按下的事件,这个事件进行发射信号，从而调用槽函数



