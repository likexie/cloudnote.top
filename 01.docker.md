# docker第一章节
## 1. 简介 
1. 主要目标：“Build Ship and Run Any App Anywhere”，一次封装，到处运行。  
解决了运行环境和配置问题软件容器，方便做持续集成并有助于整体发布的容器虚拟化技术。
## 2. Docker与虚拟机的区别
1. 虚拟机的缺点
    - 资源占用多 
    - 冗余步骤多
    - 启动慢
2. Docker与传统虚拟机不同之处
    - 传统虚拟机技术是虚拟出一套硬件后，在其上运行一个完整的操作系统，在该系统上再运行所需应用程序；
    - 而容器内的应用进程直接运行于宿主的内核，容器内没有自己的内核，而且也没有进行硬件虚拟。因此容器要比传统虚拟机更为轻便。
    - 每个容器之间互相隔离，每个容器有自己的文件系统，容器之间进程不会影响，能区分计算资源。
## 3. 安装
1. Centos Docker 
    支持以下的Centos版本
    Centos7 (64-bit) 内核：3.10或者更高版本
    Cento6.5 (64-bit) 内核：2.6.32-431或者更高版本
    
    查看内核：  
    [root@zhuRoot ~]# uname -r  
    4.18.0-240.15.1.el8_3.x86_64  
    查看版本：
    [root@zhuRoot ~]# cat /etc/redhat-release   
    CentOS Linux release 8.3.2011
2. 安装
其中ce代表社区版，ee代表企业版
```shell
yum install -y epel-release
yum install -y docker-io
安装后的配置文件：/etc/sysconfig/docker
启动Docker后台服务，service docker start
docker version验证

```
3. 执行hello word  
步骤1：从仓库拉镜像到本地  
步骤2：启动一个容器  
步骤3：看效果  
==执行：==  
## 4. 更改镜像源
部署脚本
```shell
#!/bin/bash
# 卸载老的版本
sudo yum remove docker \
                  docker-client \
                  docker-client-latest \
                  docker-common \
                  docker-latest \
                  docker-latest-logrotate \
                  docker-logrotate \
                  docker-engine
				 
sudo yum install -y yum-utils
yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
sudo yum-config-manager --enable docker-ce-nightly
sudo yum-config-manager --enable docker-ce-test
sudo yum-config-manager --disable docker-ce-nightly
sudo yum install docker-ce docker-ce-cli containerd.io

# 配置源
cat > /etc/docker/daemon.json <<EOF
{
    "registry-mirrors": ["http://hub-mirror.c.163.com"]
}
EOF
echo "---ok---"

```

## 底层原理
（1）docker有着比虚拟机更少的抽象层，由于docker不需要Hypervisor实现硬件资源虚拟化，运行在docker容器上的程序直接使用的都是实际物理的硬件资源，因此在CPU内存利用率上有明显的优势。  
（2）docker利用的宿主机的内核，不需要GuestOS,因此新建一个容器，不需要和虚拟机一样重新加载一个操作系统内核。仍而避免引导，加载操作系统内核耗时。


