# 反序列化知识点2

## 1. 序列化器的create和update方法

- 首先认识一下序列化器的save()方法

  ```python
  def post(self, request, id):
          try:
              # hero_obj = HeroInfo.objects.filter(id=2)
              # hero_obj = dict(hero_obj)
              data = request.POST.dict()
              # data['heroinfo_set'] = hero_obj
              ser_data = BookInfoTestSerializer(data=data)
              if ser_data.is_valid(raise_exception=True):
                  # 保存数据
                  ser_data.save()
                  return JsonResponse(data=ser_data.data)
              return HttpResponse(str(ser_data.errors))
          except Exception as e:
              return HttpResponse(e)
  这里程序里有个save()方法
  在序列化中这个方法的源码如下
  # serializer.py
  def save(self, **kwargs):
  # 略去一些稍微无关的内容
      ···
      if self.instance is not None:
          self.instance = self.update(self.instance, validated_data)
              ···
      else:
          self.instance = self.create(validated_data)
              ···
      return self.instance
  解读：
  其中self指的是序列化类对象。
  我们序列化时传递的参数是:BookInfoTestSerializer(instance,data)
  其中self.instance就是传入的参数
  1. 当我们传入参数instance时，我们调用save()方法，就会进行更新操作
  2. 当我们没传入参数instance时，我们调用save()方法，这个时候会进行创建操作
  
  ```

  