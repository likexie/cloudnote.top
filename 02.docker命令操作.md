# 命令
## 镜像操作
- 查看镜像
    ```shell
    # 查看镜像
    docker images
    # 1. 查看全部所有的镜像包含中间映像层
    docker images -a
    # 2. 只显示镜像ID(删除多个镜像时可以使用)
    docker images -q
    # 3. 显示镜像的摘要
    docker images --digests
    # 4. 显示完整的镜像信息
    docker images --no-trunc
    
    ```
- 搜索镜像
    ```shell
    1.去我们设置的镜像源哪里搜索镜像
    docker search 某个镜像的名字
    2.使用过滤命令
    查找被stars大于等于50的
    docker search --filter=stars=50 python
    
    ```
- 拉取镜像
    ```shell
    1. 拉取镜像,默认拉取最高版本
    docker pull tomcat 等价于 docker pull tomcat:latest
    ```
- 删除镜像
    ```shell
    1. 普通删除
    docker rmi 镜像名称
    2. 强制删除
    docker rmi -f 镜像名
    3. 删除多个
    docker rmi 镜像1：版本 镜像2：版本
    4. 删除跟表达式$()
    docker rmi $(docker images -qa)
    ```
## 容器操作
- 容器操作run
    ```shell
    1. docker run --name="容器的新名字"
    2. docker run -d 后台运行容器，也即启动守护式容器
    3. docker run -i 以交互式运行一个容器，通常与-t 同时使用
    4. docker run -t 为容器启动一个伪终端
    5. docker run -P 随机端口映射
    6. dokcer run -p 指定端口映射，有以下四种格式
       ip:hostPort:containerPort
       ip::containerPort
       hostPort:containerPort
       containerPort
    ```
- 容器ps
    ```shell
    docker ps -a 列出当前运行的和历史上运行的
    docker ps -l 显示最近创建的容器
    docker -n int 显示最近int个创建的容器
    docker -q 静默模式，只显示容器编号
    docker --no-trunc 不截断输出
    
    ```
- 启动容器
    ```shell
    docker start CONTAINER_ID
    ```
- 重启容器
    ```shell
    docker restart CONTAINER_ID
    ```
- 停止容器
    ```shell
    docker stop CONTAINER_ID
    ```
- 强制停止容器
    ```shell
    docker kill CONTAINER_ID
    ```
- 删除已停止容器
    ```shell
    docker rm CONTAINER_ID
    docker rm -f CONTAINER_ID
    # 一次性删除多个
    docker rm -f $(docker ps -aq)
    docker ps -aq | xargs docker rm
    ```
## 重要命令
- 启动守护式进程
    ```shell
    # 后台启动
    docker run -d centos
    通过docker ps 发现没有该进程，这是因为docker机制影响的
    ```
- 查看日志
    ```shell
    docker run -d centos /bin/bash -c 'while true;do echo 1;sleep 1 done;'
    docker logs -f -t --tail CONTAINER_ID
    -t：加入时间戳
    -f 跟随最新的日志打印
    --tail 数字 显示最后多少条
    
    ```
- 查看容器内的进程
    ```shell
    docker top ID
    此处的top命令在linux中也有，这个可以把容器看成是一个简易版的Linux环境
    ```
    
- 进入命令交互
    ```shell
    # 启动一个容器
    docker run -it centos /bin/bash
    # 进去容器两种方法
    docker attach 容器id:直接进入启动命令的终端，不会启动新的进程
    docker exec -it 容器ID:打开一个新的终端，并可以启动新的进程
    ```
    
- 复制文件
    ```shell
    当容器停止后我们怎么复制文件到本地
    docker cp 容器ID:/root/t.txt /本地
    ```